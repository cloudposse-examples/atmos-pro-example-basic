base_path: ""

aliases:
  tofu: terraform

components:
  terraform:
    command: "tofu" # Use the `tofu` command when calling "terraform" in Atmos.
    base_path: "components/terraform"
    apply_auto_approve: false
    deploy_run_init: true
    init_run_reconfigure: true
    auto_generate_backend_file: true

stacks:
  base_path: "stacks"
  included_paths:
    - "deploy/**/*"
  excluded_paths:
    - "**/_defaults.yaml"
  name_pattern: "{stage}"

integrations:
  github:
    gitops:
      opentofu-version: 1.7.7
      artifact-storage:
        region: "us-east-2"
        bucket: "ex1-core-use2-auto-gitops-plan-storage"
        table: "ex1-core-use2-auto-gitops-plan-storage"
        role: "arn:aws:iam::461333128641:role/ex1-core-use2-auto-gha-iam-gitops"
      role:
        plan: "arn:aws:iam::582055374050:role/cptest-core-gbl-identity-planners"
        apply: "arn:aws:iam::582055374050:role/cptest-core-gbl-identity-planners"

docs:
  generate:
    readme:
      base-dir: .
      template: ".github/README.md.gotmpl"
      output: ".github/README.md"
      terraform:
        enabled: false
      input:
        - "README.yaml"
